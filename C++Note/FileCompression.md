# 文件压缩

## 1.什么是文件压缩

> 文件压缩是指在不丢失有用信息的前提下、缩减数据量以减少存储空间，提高其传输、存储和处理效率，或按照一定的算法对文件中数据进行重新组织，减少数据的冗余和存储的空间的一种技术方法。

## 2.为什么需要压缩

> 1. 紧缩数据存储容量，减少存储空间
>
> 2. 可以提高数据传输的速度，减少带宽占用量，提高通讯效率
>
> 3. 对数据的一种加密保护，增强是数据在传输过程中的安全性

## 3.压缩的分类

> - **有损压缩**
>
>   允许压缩过程中损失一定的信息，虽不能完全恢复原始数据，但是所损失的部分对原始图像的影响缩小，换来更大的压缩率
>
> - **有损压缩**
>
>   压缩后的文件可以被还原成与源文件完全相同的格式，不会影响文件内容。

## 4.压缩本质

> 目的是让文件变小，

## 设计算法处理

### 1.**<长度、距离>**对(LZ77原型)

**将重复出现的内容 替换成更短的<长度，距离>对**

>  **对重复出现的文字压缩**
>
> mno==abc==zxyuvw==abc==123456==abc==zxydefgh
>
> 用**<长度、距离>**对的方式来替换
>
> **长度**：重复文件所占的字节
>
> **距离**：后文中重复出现词语首字节 与 前文中的重复词语的 **字节差**
>
> **压缩**：monabczxyuvw==(3,9)==123456==(6,18)==defgh
>
> **解压**：用长度距离 去替换回来 

### 2.编码替换

#### 等长编码

一个字节是8比特位

给每个字节找一个小于8比特位的编码，来替换文件中的字节。

**文件**：DDAB DDBC DBCD CDCC	（16字节）

**编码**：A：00	B：01	C：10	D：11

**压缩**：11110001 11110110 11011011 10111010	（4字节）

**解压**：DDAB DDBC DBCD CDCC		(查表解压)



==优化==：让出现次数少的编码长一点，让出现次数多的编码少一些

#### 动态不等长编码

**文件**：DDAB DDBC DBCD CDCC DDD	(19字节)

**编码**：A：100	B：101	C：11	D：0

**解压**：00100101 00101110 10111011 01111000	（4字节）



### 编码格式怎么来的？

依据Huffman树得来

根据字符出现的次数构建Huffman树

A：1	B：3	C：5	D：10

![image-20220903101019365](https://picgo-1311604203.cos.ap-beijing.myqcloud.com/imageimage-20220903101019365.png)

注意：某个编码不能是其他编码的前缀。也就是B时A的父节点，不可能出现，必须所有编码都在叶子。

## Huffman树

带权路径长度，二叉树的根节点到二叉树所有叶族节点的路径长度与相应权值乘积之和

而huffman树的带权路径是最小的。

**发现**：权值打的靠近根，带权路径就越小

### 如何创建Huffman数

先创建N个数的森林   10 5 3 1 

先在森林中获取两个权值最小的两个树  3、1   **新节点的权值是这两个权值之和**

将新的二叉树放回二叉树森林中  10  5   4

4 、5    = 9

9 、10 = 19

此时森林创建完成

![image-20220903104549289](https://picgo-1311604203.cos.ap-beijing.myqcloud.com/imageimage-20220903104549289.png)

## Huffman编码压缩过程

1.统计源文件中每个字节出现的次数

2.字节频次 来创建Huffman树

3.获取每个字节的Huffman编码

4.用得到的编码，对源文件的每一个字节来改写。